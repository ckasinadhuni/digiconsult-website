#!/bin/bash

# Single Command Deployment for Telegram AI Assistant
# Usage: ./deploy

echo "ğŸš€ Starting Telegram AI Assistant Deployment..."
echo "================================================="

cd /home/ubuntu/claude-prompts/admin

# Run the fully automated Python deployment
python3 fully-automated-deploy.py

exit_code=$?

if [ $exit_code -eq 0 ]; then
    echo ""
    echo "ğŸ‰ SUCCESS! Your Telegram AI Assistant is ready!"
    echo "================================================="
    echo "ğŸ“± Find your bot on Telegram and start chatting!"
    echo "ğŸ’¬ Try sending:"
    echo "   â€¢ Text messages"
    echo "   â€¢ Voice messages" 
    echo "   â€¢ Images or documents"
    echo ""
    echo "ğŸ”§ Powered by:"
    echo "   â€¢ faster-whisper (voice transcription)"
    echo "   â€¢ Ollama mistral:7b (AI responses)"
    echo "   â€¢ n8n (workflow automation)"
    echo "================================================="
else
    echo ""
    echo "âŒ Deployment failed. Check the logs above."
    echo "ğŸ’¡ Common fixes:"
    echo "   â€¢ Ensure n8n is running: http://localhost:5678"
    echo "   â€¢ Verify faster-whisper: http://localhost:8000/health"
    echo "   â€¢ Check Ollama: http://localhost:11434/api/tags"
    exit 1
fi